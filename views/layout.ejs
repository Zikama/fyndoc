<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="author" lang="en" content="Nehemie Zikama" />
    <meta name="copyright" lang="en" content="2019" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="content-language" content="en" />
    <meta name="description" content=" Sadja Web Solutions Contract Manager" />
    <link href="https://github.com/zikama" rel="author" />
    <meta name="theme-color" content="rgb(236, 236, 236)" />

    <!-- <link href="https://fonts.googleapis.com/css?family=Martel|Quattrocento+Sans" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserra|Quattrocento" />
    <link rel="stylesheet " href="https://use.fontawesome.com/releases/v5.8.2/css/all.css " integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay " crossorigin="anonymous " />
    <link rel="icon" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'../'%>favicon" />
    <!-- Medium editor -->
    <link rel="stylesheet" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'../'%>assets_/medium-editor-embed-button/dist/css/medium-editor-embed-button.min.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'./'%>assets_/medium-editor/dist/css/medium-editor.css" />
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'./'%>assets_/medium-editor/dist/css/themes/beagle.css" />

    <% if (typeof no_manifest!= "undefined" &&!no_manifest) {%>
        <link rel="manifest" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'../'%>manifest.json" />
        <% } %>
            <% if(typeof original_css!= "undefined"&&original_css) { %>
                <link rel="stylesheet" type="text/css" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'../../'%>assets/css/style.css" />
                <% } %>
                    <% if(typeof custome_css!= "undefined"&& custome_css &&
    custome_css[0] !=""){ %>
                        <link rel="stylesheet" href="<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'../../'%><%=custome_css[0]%>" />
                        <% } %>

                            <title>
                                <% if(title.true){%>
                                    <%=title.name%>
                                        <%}%>
                            </title>
                            <script>
                                // Define the socket Path
                                let soc = `${window.location.origin
        .replace("http", "ws")
        .replace("https", "wss")}`;
                            </script>
</head>

<body>
    <%-body %>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            function keepLive() {
                axios({
                        method: "post",
                        url: "<%=typeof pathToTheRoot !=='undefined'?pathToTheRoot:'/'%>keeplive"
                    })
                    .then(value => {
                        // The server is active now
                    })
                    .catch(err => {
                        console.log(err); // There was an error
                    });
            }
            setInterval(keepLive, 100000);

            let inp = document.querySelectorAll(".editor_input");
            if (typeof inp != "undefined" && inp.length) {
                for (_in of inp) {
                    if (_in) {
                      _in.addEventListener("keyup", e_ => {
                            let lwgth = _in.value.length - 2 <= 0 ? 1 : _in.value.length - 2;
                            lwgth = _in.value.length - 3 <= 3 ? 3 : _in.value.length - 3;
                            lwgth = _in.value.length - 5 <= 5 ? 6 : _in.value.length - 5;
                            _in.setAttribute("size", lwgth);
                        });
                    }
                }
            }
            const sock = new WebSocket(soc);

            sock.onopen = function() {
                sock.send(
                    JSON.stringify({
                        type: "visits",
                        date: Date.now(),
                        times: 0
                    })
                );
            };
        </script>
</body>

</html>